# 大厅和房间更新记录

## 1.2时代
大厅分为5人、6人、7人，预留比赛场和私人场；房间均为按底注分类（100底，500底，1000底，2000底），形成低倍到高倍；
问题：
1、由于初期用户少或产品操作设计导致玩家都停留在5人场，造成喜欢玩6、7人的用户不舒畅
2、大厅分类概念不明显，其实是按游戏参与人数分类，没有突出大厅概念，对外宣传时，说：“我在五人场玩”不如“我在普通场玩，我在元宝场玩”有力度

## 1.3时代
决定在1.3改造大厅为：普通场/元宝场/比赛场/私人场/其他(如特殊玩法，亮王子）
普通场/元宝场 内的房间列表均为 5/6/7人房间；

优势：
1、这样当用户在大厅时，看到人数统计时，普通场是XXX人，进去后才是选择几人赛制，可以弱化用户都进5人的形势。
2、彻底场次分类，形成口碑，比如约玩或炫耀，会以：“到元宝场来找我”，“我玩普通场”等

造成的影响 - 技术债务：
1、原房间设计都带有roomId和Lobby，更新后，room.json中的lobbyId改变了，对在线统计有所影响（无大碍）
之前统计根据房间ID的区间决定是哪个大厅，修改后为了兼容前版本不能修改原房间ID规则（客户端会通过房间ID加入游戏），现改为求余；

2、对用户系统任务的历史数据更新：
2.1、去掉底注是2000的房间，导致用户系统任务中的赢元宝-高级，需要删掉
2.2、任务中涉及到“高手PK”房的任务统一修改为“元宝场”
2.3、任务中涉及到“1000底注”的任务统一修改为“元宝场”

3、保留原进入大厅(enterIndex)和进入lobby（enterLobby）接口，兼容老版本，进入lobby后的房间列表要变化为新方案：即进入5人只有100底注和100底注。

关于问题2：需要做一个任务merge的脚本，对历史数据统一更新。并且支持如果有新任务升级，自动merge到用户个人信息中。


## 最终方案
lobby： 0：普通场，1：元宝场，2：比赛场，3：私人场，4：特殊场(亮王?等)
room：（roomId其实可作为牌桌分类来理解）
普通场：11、21、31（分别为五人roomId，6人roomId和7人roomId）
元宝场：13、23、33
比赛场：45（预留%10=5的数字为扩展比赛ID）
私人场：56（固定房间ID）
特殊场：暂无

```
房间ID规则由原区间决定大厅改为求余；即：lobby[0] = roomId > 0 && roomId < 20 改为 roomdId % 10 = 1;...
```